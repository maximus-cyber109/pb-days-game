<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>PB Days Rewards & Redemption</title>
  <link href="https://fonts.googleapis.com/css2?family=Bungee+Spice&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  
  <!-- Mute Button -->
  <button id="mute-btn" class="mute-btn">
    <svg id="icon-unmuted" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256"><path d="M152,216a8,8,0,0,1-8,8H104a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h40a8,8,0,0,1,8,8ZM200,40a8,8,0,0,0-8,8V208a8,8,0,0,0,16,0V48A8,8,0,0,0,200,40ZM56,80a8,8,0,0,0-8,8v80a8,8,0,0,0,16,0V88A8,8,0,0,0,56,80Z"></path></svg>
    <svg id="icon-muted" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256" style="display:none;"><path d="M152,216a8,8,0,0,1-8,8H104a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h40a8,8,0,0,1,8,8Zm48-128a8,8,0,0,0-8,8V208a8,8,0,0,0,16,0V96A8,8,0,0,0,200,88Zm-96-48a8,8,0,0,0-8,8v80a8,8,0,0,0,16,0V48A8,8,0,0,0,104,40ZM56,80a8,8,0,0,0-8,8v80a8,8,0,0,0,16,0V88A8,8,0,0,0,56,80Z"></path></svg>
  </button>

  <!-- Starfield Background -->
  <div class="stars">
    <div class="star"></div><div class="star"></div><div class="star"></div>
    <!-- ... more stars ... -->
    <div class="star"></div><div class="star"></div><div class="star"></div>
  </div>

  <img src="https://email-editor-resources.s3.amazonaws.com/images/82618240/Logo.png" alt="PB Days" class="pb-logo" />

  <!-- NEW: Auto-scrolling Card Slider -->
  <div id="card-slider-container" class="card-slider-container" style="display:none;">
    <div class="card-slider-track" id="card-slider-track">
      <!-- JS will fill this with earned cards -->
    </div>
  </div>

  <!-- Progress bar -->
  <div id="slider-bar-row">
    <div class="coc-progress-bar">
      <div class="coc-progress-inner" id="coc-progress-inner"></div>
      <div class="coc-progress-text" id="slider-text">0/7</div>
      <div id="slider-rocks" class="coc-rocks-container"></div>
    </div>
  </div>
  
  <div class="button-container">
    <button class="btn-3d-glass" id="open-gallery">View All My Cards</button>
  </div>

  <!-- REMOVED: 2x2 Card Grid -->
  <!-- <div class="cr-card-deck redeem-card-grid" id="col-deck"></div> -->

  <!-- PB Cash CTA -->
  <div class="button-container" style="margin-top: 1.5em;">
    <button class="btn-3d-glass" id="show-pb-cash" style="display:none; background: linear-gradient(145deg,#fdd835 50%,#fff59d 100%); color: #3f227b;">
      Redeem PB CASH
    </button>
  </div>

  <div class="mini-title" style="color:#fedc07;">Rewards</div>
  <div id="reward-section" class="reward-grid"></div>
  
  <div class="mini-title" style="margin-top:2.2em;">Leaderboard</div>
  <div id="leaderboard" class="leaderboard-container"></div>
  
  <!-- "Shop More" button will be injected here by app-redeem.js -->

  <!-- Gallery Modal (for "View All My Cards") -->
  <div class="modal-bg" id="gallery-modal" style="display:none;">
    <div class="modal-fg gallery-modal-content">
      
      <button id="gallery-left" class="gallery-arrow-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256">
          <path d="M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"></path>
        </svg>
      </button>
      
      <img id="gallery-card-img" src="" alt="card" class="gallery-card-img" />
      
      <button id="gallery-right" class="gallery-arrow-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256">
          <path d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"></path>
        </svg>
      </button>

      <div id="gallery-card-name" class="gallery-card-name"></div>
      
      <button class="btn-3d-glass" id="gallery-close" style="margin-top:1.1em;">Close</button>
    </div>
  </div>

  <!-- PB CASH Modal -->
  <div class="modal-bg" id="pb-cash-modal" style="display:none;">
    <div class="modal-fg">
      <div class="pb-cash-text" id="pb-cash-text"></div>
      <button class="btn-3d-glass" id="pb-cash-claim">Claim PB CASH</button>
      <button class="btn-3d-glass btn-close" id="pb-cash-close">Close</button>
    </div>
  </div>

  <audio id="bg-music" src="" loop preload="auto"></audio>
  <audio id="redeem-sfx" src="" preload="auto"></audio>
  <audio id="pb-cash-sfx" src="" preload="auto"></audio>

  <!-- Environment config -->
  <script>
    window.ENV = {
      SUPABASE_URL: "https://bizfudxxmqohlllidcgj.supabase.co",
      SUPABASE_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJpemZ1ZHh4bXFvaGxsbGlkY2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMxODM2NjYsImV4cCI6MjA3ODc1OTY2Nn0._VzTpjPudZ9kyq-cHKR-0xJP8rix7pgntjL2Acc3hY0"
    };
  </script>
  
  <!-- App scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/config.js"></script>
  <script src="js/reward-logic.js"></script>
  <script src="js/supabase-client.js"></script>
  <script src="js/app-redeem.js"></script>
</body>
</html>
